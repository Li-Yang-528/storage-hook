!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["storage-hook"]={},e.react)}(this,(function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(e){void 0===e&&(e="session");var t={local:window.localStorage,session:window.sessionStorage};this.store=t[e],this.set=this.setItem,this.get=this.getItem,this.remove=this.removeItem}e.of=function(t){return new e(t)};var t,r,o,i=e.prototype;return i.getItem=function(e){var t=this.store.getItem(e);if("undefined"!==t)try{if(/^[(\{)|(\"\[)]/.test(t)){var n=t.replace(/^[\'|\"](.*)[\'|\"]$/,(function(e,t){return t.replace(/\\/g,"")}));return JSON.parse(n)}return JSON.parse(t)}catch(e){return t}},i.setItem=function(e,t){return this.store.setItem(e,"string"!=typeof t?JSON.stringify(t):t),this},i.removeItem=function(e){return this.store.removeItem(e),this},i.clear=function(e){var t=this,n=Array.isArray(e)?e:e?[e]:[];return n.length?(this.keys.forEach((function(e){n.includes(e)||t.removeItem(e)})),this):(this.store.clear(),this)},i.key=function(e){return this.store.key(e)},i.end=function(t){return t?t(e):e},t=e,(r=[{key:"lenght",get:function(){return this.store.length}},{key:"keys",get:function(){for(var e=this.lenght,t=[],n=0;n<e;n++)t.push(this.store.key(n));return t}}])&&n(t.prototype,r),o&&n(t,o),e}();function o(e){return function(n){var r=e,o=function(){return r.get(n)},i=t.useState(o),s=i[0],u=i[1];if(!n)return function(e){void 0===e&&(e=[]),r.clear(e),u(void 0)};t.useEffect((function(){u(o())}),[n]);var f=t.useCallback((function(e){if(void 0===e)r.remove(n),u(void 0);else{var t=Object.assign(s,"function"==typeof e?e(o()):e||o());r.set(n,t),u(t)}}),[n]);return[s,f]}}["local","session"].forEach((function(e){r[e]=r.of(e)}));var i=o(r.local),s=o(r.session);e.VuePlugin=function e(t){e.installed||(e.installed=!0,Object.defineProperty(t.prototype,"$storage",{get:function(){return r}}))},e.storage=r,e.useLocal=i,e.useSession=s,Object.defineProperty(e,"__esModule",{value:!0})}));
