/*
 * @FilePath     : /storage-hook/dist/storage-hoo.min.js
 * @Author       : LiYang
 * @Date         : 2021-06-15 11:25:03
 * @LastEditTime : 2021-06-15 11:25:36
 * @LastEditors  : 
 * @Description  : 
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["storage-hook"]={},e.react)}(this,(function(e,t){"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(e){void 0===e&&(e="session");var t={local:window.localStorage,session:window.sessionStorage};this.store=t[e],this.set=this.setItem,this.get=this.getItem,this.remove=this.removeItem}e.of=function(t){return new e(t)};var t,n,o,i=e.prototype;return i.getItem=function(e){var t=this.store.getItem(e);if("undefined"!==t)try{if(/^[(\{)|(\"\[)]/.test(t)){var r=t.replace(/^[\'|\"](.*)[\'|\"]$/,(function(e,t){return t.replace(/\\/g,"")}));return JSON.parse(r)}return JSON.parse(t)}catch(e){return t}},i.setItem=function(e,t){return this.store.setItem(e,"string"!=typeof t?JSON.stringify(t):t),this},i.removeItem=function(e){return this.store.removeItem(e),this},i.clear=function(e){var t=this,r=Array.isArray(e)?e:e?[e]:[];return r.length?(this.keys.forEach((function(e){r.includes(e)||t.removeItem(e)})),this):(this.store.clear(),this)},i.key=function(e){return this.store.key(e)},i.end=function(t){return t?t(e):e},t=e,(n=[{key:"lenght",get:function(){return this.store.length}},{key:"keys",get:function(){for(var e=this.lenght,t=[],r=0;r<e;r++)t.push(this.store.key(r));return t}}])&&r(t.prototype,n),o&&r(t,o),e}();function o(e){return function(r){var n=e,o=function(){return n.get(r)},i=t.useState(o),s=i[0],u=i[1];if(!r)return function(e){void 0===e&&(e=[]),n.clear(e),u(void 0)};t.useEffect((function(){u(o())}),[r]);var f=t.useCallback((function(e){if(void 0===e)n.remove(r),u(void 0);else{var t=Object.assign(s,"function"==typeof e?e(o()):e||o());n.set(r,t),u(t)}}),[r]);return[s,f]}}["local","session"].forEach((function(e){n[e]=n.of(e)}));var i=o(storage.local),s=o(storage.session);e.VuePlugin=function e(t){e.installed||(e.installed=!0,Object.defineProperty(t.prototype,"$storage",{get:function(){return storage}}))},e.storage=n,e.useLocal=i,e.useSession=s,Object.defineProperty(e,"__esModule",{value:!0})}));
